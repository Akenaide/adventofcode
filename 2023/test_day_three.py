import pytest

import day_three


# def test_simple():
#     entry = """
#     467.......
#     ...*......
#     """

#     assert day_three.get_nums(entry=entry) == [
#         "467",
#     ]


# def test_many_digit():
#     entry = """
#     467..234..
#     ...*......
#     """

#     assert day_three.get_nums(entry=entry) == [
#         "467",
#         "234",
#     ]


def test_get_num():
    entry = ".......*............680.....*......876.........864..................259.................124.169....799............608..*.........98......951"
    assert [num[0] for num in day_three.get_nums(entry=entry)] == [
        "680",
        "876",
        "864",
        "259",
        "124",
        "169",
        "799",
        "608",
        "98",
        "951",
    ]


def test_valid_digit_end():
    entry = [
        "467*.234..",
    ]

    assert day_three.valide_num(entry=entry) == [
        467,
    ]


def test_valid_digit_start():
    entry = [
        "*467..234..",
    ]

    assert day_three.valide_num(entry=entry) == [
        467,
    ]


def test_valid_digit_many_start():
    entry = [
        "*467..*234..",
    ]

    assert day_three.valide_num(entry=entry) == [467, 234]


def test_valid_digit_end():
    entry = [
        "467*..234..",
    ]

    assert day_three.valide_num(entry=entry) == [
        467,
    ]


def test_valid_digit_many_end():
    entry = [
        "467*..234*..",
    ]

    assert day_three.valide_num(entry=entry) == [467, 234]


def test_valid_digit_up():
    entry = [
        "467..234..",
        ".*........",
    ]

    assert day_three.valide_num(entry=entry) == [
        467,
    ]


def test_valid_digit_many_up():
    entry = [
        "467..234..",
        ".*....*...",
    ]

    assert day_three.valide_num(entry=entry) == [467, 234]


def test_valid_digit_diag():
    entry = [
        "467..234..",
        "...*......",
    ]

    assert day_three.valide_num(entry=entry) == [
        467,
    ]


def test_valid_digit_many_diag():
    entry = [
        "....*....",
        "467..234..",
        "...*.....",
    ]

    assert day_three.valide_num(entry=entry) == [467, 234]


def test_valid_digit_many_last():
    entry = [
        ".........",
        "467..2345*",
        "...*.....",
    ]

    assert day_three.valide_num(entry=entry) == [
        467,
        2345,
    ]


def test_valid_digit_many_last_line():
    entry = [
        "..........",
        "467.....6.",
        "...*...*..",
    ]

    assert day_three.valide_num(entry=entry) == [
        467,
        6,
    ]


def test_sample():
    entry = [
        "467..114..",
        "...*......",
        "..35..633.",
        "......#...",
        "617*......",
        ".....+.58.",
        "..592.....",
        "......755.",
        "...$.*....",
        ".664.598..",
    ]

    assert day_three.valide_num(entry=entry) == [
        467,
        35,
        633,
        617,
        592,
        755,
        664,
        598,
    ]

    assert sum(day_three.valide_num(entry=entry)) == 4361


def test_sample2():
    entry = [
        "798....*565.793.............*....98.....447.....@......291...$...............*..244................%..491.../...................*...........",
        "....546......*....454...120..683.............923.....@...*...865.574......276........56......57.659..*................-...-...512...........",
        "............329...*.................................606.599...................*927..*.........-.......674..*........723..974................",
    ]

    assert day_three.valide_num(entry=entry) == [
        565,
        793,
        291,
        491,
        546,
        454,
        683,
        923,
        865,
        276,
        56,
        57,
        659,
        512,
        329,
        606,
        599,
        927,
        674,
        723,
        974,
    ]


def test_sample_3():
    entry = [
        "........@......504.......-........652.........................104....@502......................*...............691.*.........*.423..706..402",
        ".286..218.882........-....579......................320.....=...-..........48.393.....202......758.....242..951..............................",
        "....*.....*.....$..943.............928.....*......*......310......&........*....*...*......=..............*......295*133....................",
        "..698...331...859.......91.........#....815....822..............39..........833....749...591...........455....*..........&30....*...........",
    ]

    assert day_three.valide_num(entry=entry) == [
        104,
        502,
        286,
        218,
        882,
        579,
        320,
        48,
        393,
        202,
        758,
        951,
        943,
        928,
        310,
        295,
        133,
        698,
        331,
        859,
        815,
        822,
        39,
        833,
        749,
        591,
        455,
        30,
    ]


def test_sample_4():
    entry = [
        "....&..948..........................271....-....228..79.26.........................733...=...715............27.586........*.......883...*...",
        "..172.......=..+.............88&....%....340.55.....+.............465..398......=..................585.......*....*812...347................",
        "...........374.462.......166..................*...........786........*....*910..675.................*.....149................653*....+80....",
        ".......*............680.....*......876.........864..................259.................124.169....799............608..*.........98......951",
        "....615.......*....%.....151.........*....#802........$.......680......................../...............857........-.901...............*...",
        "..............3.................637..493...........926....636..*.....350........881.........699......886.../.458...........#..474*409...246.",
    ]

    assert day_three.valide_num(entry=entry) == [
        271,
        79,
        27,
        586,
        172,
        88,
        340,
        55,
        465,
        398,
        585,
        812,
        347,
        374,
        462,
        166,
        910,
        675,
        149,
        653,
        80,
        680,
        876,
        864,
        259,
        124,
        799,
        608,
        98,
        951,
        615,
        151,
        802,
        680,
        857,
        901,
        3,
        493,
        926,
        474,
        409,
        246,
    ]
